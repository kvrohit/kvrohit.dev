---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";

const repos = await fetch("https://api.github.com/users/kvrohit/repos");
const allRepos = await repos.json();
const featuredRepos = [
  "substrata.nvim",
  "rasmus.nvim",
  "tasks.nvim",
  "fortune",
];

export interface Repo {
  name: string;
  description: string;
  stargazers_count: number;
  html_url: string;
}
---

<Layout title="Home - kvrohit.dev">
  <section class="text-white bg-gray-900">
    <div class="max-w-screen-xl px-4 py-32 mx-auto">
      <!-- lg:h-screen lg:items-center lg:flex" -->
      <div class="max-w-3xl mx-auto text-center">
        <h1
          class="text-3xl font-extrabold text-transparent sm:text-5xl bg-clip-text bg-gradient-to-r from-green-300 via-blue-500 to-purple-600"
        >
          Hi there!
        </h1>
        <p class="max-w-xl mx-auto mt-4 sm:leading-relaxed sm:text-xl">
          Welcome to kvrohit.dev
        </p>
      </div>
    </div>
  </section>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-screen-xl">
    <h2 class="text-2xl md:text-3xl font-semibold my-8">Projects</h2>
    <div class="grid sm:grid-cols-2 gap-8 my-8">
      {
        allRepos
          .filter((repo: Repo) => featuredRepos.includes(repo.name))
          .sort((a: Repo, b: Repo) => b.stargazers_count - a.stargazers_count)
          .map((repo: Repo) => (
            <Card
              title={repo.name}
              body={repo.description}
              href={repo.html_url}
              stars={repo.stargazers_count}
              icon={repo.description.includes("color") ? "color" : "code"}
            />
          ))
      }
    </div>
  </div>
</Layout>
