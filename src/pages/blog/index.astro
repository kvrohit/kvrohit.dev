---
import Layout from "../../layouts/Layout.astro";

let posts = await Astro.glob("../../posts/*.md");
posts = posts.sort(
  (a, b) =>
    new Date(b.frontmatter.date).valueOf() -
    new Date(a.frontmatter.date).valueOf()
);
---

<Layout title="Blog - kvrohit.dev">
  <section class="text-white bg-gray-900">
    <div class="max-w-screen-xl px-4 py-32 mx-auto">
      <!-- lg:h-screen lg:items-center lg:flex" -->
      <div class="max-w-3xl mx-auto text-center">
        <h1
          class="text-3xl font-extrabold text-transparent sm:text-5xl bg-clip-text bg-gradient-to-r from-green-300 via-blue-500 to-purple-600 py-2"
        >
          Blog posts
        </h1>
      </div>
    </div>
  </section>
  <main class="container mx-auto px-4 lg:px-8 max-w-screen-xl">
    {
      posts.map((post, index) => {
        const href = `/blog/${post.file.split("/").pop().split(".").shift()}`;
        return (
          <div class="my-8 flex sm:flex-row flex-col gap-2 sm:gap-4 sm:divide-x-2 border-b pb-8 sm:border-none sm:pb-0">
            <div class="sm:flex sm:flex-col items-center justify-center sm:min-w-max">
              <span class="sm:text-2xl sm:block text-gray-500 sm:text-gray-600">
                {new Date(post.frontmatter.date).toLocaleString("en-US", {
                  day: "2-digit",
                })}
              </span>
              <span class="sm:font-sm sm:block text-gray-500">
                {new Date(post.frontmatter.date).toLocaleString("en-US", {
                  year: "numeric",
                  month: "short",
                })}
              </span>
            </div>
            <div class="sm:px-4">
              <h2 class="text-xl md:text-2xl mb-2 text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-red-500">
                <a class="hover:text-indigo-800" href={href}>
                  {post.frontmatter.title} &rarr;
                </a>
              </h2>
              <p class="text-gray-500">{post.frontmatter.description}</p>
            </div>
          </div>
        );
      })
    }
  </main>
</Layout>
